// prisma/schema.prisma
datasource db {
  provider          = "mysql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Plant {
  id         Int         @id @default(autoincrement())
  name       String
  species    String?
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
  deletedAt  DateTime?
  imageUrl    String?
  roomId     Int?
  ownerId    Int?
  room       Room?       @relation(fields: [roomId], references: [id])
  owner      User?       @relation(fields: [ownerId], references: [id])
  photos     Photo[]
  careEvents CareEvent[]
}

model Room {
  id     Int     @id @default(autoincrement())
  name   String
  plants Plant[]
}

model User {
  id     Int     @id @default(autoincrement())
  email  String  @unique
  plants Plant[]
}

model Photo {
  id        Int      @id @default(autoincrement())
  url       String
  uploaded  DateTime @default(now())
  plant     Plant    @relation(fields: [plantId], references: [id])
  plantId   Int
  @@index([plantId])
}

model CareEvent {
  id       Int      @id @default(autoincrement())
  type     CareEventType
  date     DateTime
  plant    Plant    @relation(fields: [plantId], references: [id])
  plantId  Int
  @@index([plantId])
}

enum CareEventType {
  WATER
  FERTILIZE
  PRUNE
  REPOT
}


